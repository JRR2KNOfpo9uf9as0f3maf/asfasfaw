function BytecodeEncoder.process(code)
    math.randomseed(os.time()) -- Pastikan random seed diinisialisasi

    local fn, err = load(code)
    if not fn then
        error("Bytecode encoding failed: " .. tostring(err))
    end

    local bytecode = string.dump(fn)
    local offset = math.random(1, 255)
    local encoded_bytecode = encode_bytecode(bytecode, offset)

    if not encoded_bytecode or encoded_bytecode == "" then
        error("Bytecode encoding error: encoded bytecode is empty")
    end

    local alpha = [[
        local e, o, d = "%s", %d, {}
        for i = 1, #e, 2 do
            local b = tonumber(e:sub(i, i + 1), 16)
            b = (b - o + 256) % 256
            d[#d + 1] = string.char(b)
        end
        local f = assert(load(table.concat(d)))
        f()
    ]]
    return string.format(alpha, encoded_bytecode, offset)
end
