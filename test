local function encode(str, key)
    local res = {}
    for i = 1, #str do
        res[i] = string.char((str:byte(i) ~ key) % 256) -- XOR dengan kunci acak
    end
    return table.concat(res)
end

local function obfuscate(filename)
    local f = io.open(filename, "r")
    if not f then
        print("File tidak ditemukan!")
        return
    end

    local code = f:read("*a") -- Baca kode asli
    f:close()

    local key = math.random(10, 200) -- Kunci XOR acak
    local encoded = encode(code, key) -- Enkripsi kode

    -- Simpan ke file baru
    local output = "encrypted_" .. filename
    local f_out = io.open(output, "w")

    -- Kode langsung terenkripsi tanpa fungsi tambahan
    f_out:write(string.format("load((function() local d='%s',k=%d,r='' for i=1,#d do r=r..string.char((d:byte(i)~k)%%256) end return r end)())", encoded, key))

    f_out:close()
    print("Obfuscation selesai! File disimpan sebagai: " .. output)
end

obfuscate("CRUS4DER DF 0.1.lua.txt")
ppkjsjs
